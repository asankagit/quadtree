!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("@asanka-npm/chameleon",[],r):"object"==typeof exports?exports["@asanka-npm/chameleon"]=r():e["@asanka-npm/chameleon"]=r()}(this,(()=>(()=>{var e={872:function(e,r){var n,t,o;function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}t=this,o=function(){"use strict";var e,r=this;function n(e){r.console&&(r.console.error?r.console.error(e):r.console.log&&r.console.log(e))}function t(e,r,t,o){var i=o||n,a=e.createShader(t);return e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(i("*** Error compiling shader '"+a+"':"+e.getShaderInfoLog(a)+"\n"+r.split("\n").map((function(e,r){return"".concat(r+1,": ").concat(e)})).join("\n")),e.deleteShader(a),null)}function o(e,r,t,o,i){var a=i||n,u=e.createProgram();return r.forEach((function(r){e.attachShader(u,r)})),t&&t.forEach((function(r,n){e.bindAttribLocation(u,o?o[n]:n,r)})),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)?u:(a("Error in program linking:"+e.getProgramInfoLog(u)),e.deleteProgram(u),null)}(e=e||r)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","https://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var a=["VERTEX_SHADER","FRAGMENT_SHADER"];function u(e,r){return r===e.SAMPLER_2D?e.TEXTURE_2D:r===e.SAMPLER_CUBE?e.TEXTURE_CUBE_MAP:void 0}function c(e,r){var n=0;function t(r,t){var o,i,a=e.getUniformLocation(r,t.name),c=t.type,f=t.size>1&&"[0]"===t.name.substr(-3);if(c===e.FLOAT&&f)return function(r){e.uniform1fv(a,r)};if(c===e.FLOAT)return function(r){e.uniform1f(a,r)};if(c===e.FLOAT_VEC2)return function(r){e.uniform2fv(a,r)};if(c===e.FLOAT_VEC3)return function(r){e.uniform3fv(a,r)};if(c===e.FLOAT_VEC4)return function(r){e.uniform4fv(a,r)};if(c===e.INT&&f)return function(r){e.uniform1iv(a,r)};if(c===e.INT)return function(r){e.uniform1i(a,r)};if(c===e.INT_VEC2)return function(r){e.uniform2iv(a,r)};if(c===e.INT_VEC3)return function(r){e.uniform3iv(a,r)};if(c===e.INT_VEC4)return function(r){e.uniform4iv(a,r)};if(c===e.BOOL)return function(r){e.uniform1iv(a,r)};if(c===e.BOOL_VEC2)return function(r){e.uniform2iv(a,r)};if(c===e.BOOL_VEC3)return function(r){e.uniform3iv(a,r)};if(c===e.BOOL_VEC4)return function(r){e.uniform4iv(a,r)};if(c===e.FLOAT_MAT2)return function(r){e.uniformMatrix2fv(a,!1,r)};if(c===e.FLOAT_MAT3)return function(r){e.uniformMatrix3fv(a,!1,r)};if(c===e.FLOAT_MAT4)return function(r){e.uniformMatrix4fv(a,!1,r)};if((c===e.SAMPLER_2D||c===e.SAMPLER_CUBE)&&f){for(var l=[],s=0;s<info.size;++s)l.push(n++);return function(r,n){return function(t){e.uniform1iv(a,n),t.forEach((function(t,o){e.activeTexture(e.TEXTURE0+n[o]),e.bindTexture(r,t)}))}}(u(e,c),l)}if(c===e.SAMPLER_2D||c===e.SAMPLER_CUBE)return o=u(e,c),i=n++,function(r){e.uniform1i(a,i),e.activeTexture(e.TEXTURE0+i),e.bindTexture(o,r)};throw"unknown type: 0x"+c.toString(16)}for(var o={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),a=0;a<i;++a){var c=e.getActiveUniform(r,a);if(!c)break;var f=c.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var l=t(r,c);o[f]=l}return o}function f(e){e=e.uniformSetters||e;for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];for(var o=function(){var r=a[i];Object.keys(r).forEach((function(n){var t=e[n];t&&t(r[n])}))},i=0,a=n;i<a.length;i++)o()}function l(e,r){var n={};function t(r){return function(n){if(n.value)switch(e.disableVertexAttribArray(r),n.value.length){case 4:e.vertexAttrib4fv(r,n.value);break;case 3:e.vertexAttrib3fv(r,n.value);break;case 2:e.vertexAttrib2fv(r,n.value);break;case 1:e.vertexAttrib1fv(r,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,n.numComponents||n.size,n.type||e.FLOAT,n.normalize||!1,n.stride||0,n.offset||0)}}for(var o=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),i=0;i<o;++i){var a=e.getActiveAttrib(r,i);if(!a)break;var u=e.getAttribLocation(r,a.name);n[a.name]=t(u)}return n}function s(e,r){e=e.attribSetters||e,Object.keys(r).forEach((function(n){var t=e[n];t&&t(r[n])}))}function v(e,r,n,t){var o=e.createVertexArray();return e.bindVertexArray(o),s(r,n),t&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bindVertexArray(null),o}function m(e,r,n){s(r,n.attribs),n.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices)}var d=["","MOZ_","OP_","WEBKIT_"];function g(e,r,n){return function(e,r){var n=0;return e.push=function(){for(var r=0;r<arguments.length;++r){var t=arguments[r];if(t instanceof Array||t.buffer&&t.buffer instanceof ArrayBuffer)for(var o=0;o<t.length;++o)e[n++]=t[o];else e[n++]=t}},e.reset=function(e){n=e||0},e.numComponents=r,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}(new(n||Float32Array)(e*r),e)}function p(e,r,n,t){n=n||e.ARRAY_BUFFER;var o=e.createBuffer();return e.bindBuffer(n,o),e.bufferData(n,r,t||e.STATIC_DRAW),o}function h(e){return"indices"!==e}function A(e,r){if(r instanceof Int8Array)return e.BYTE;if(r instanceof Uint8Array)return e.UNSIGNED_BYTE;if(r instanceof Int16Array)return e.SHORT;if(r instanceof Uint16Array)return e.UNSIGNED_SHORT;if(r instanceof Int32Array)return e.INT;if(r instanceof Uint32Array)return e.UNSIGNED_INT;if(r instanceof Float32Array)return e.FLOAT;throw"unsupported typed array type"}function b(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function E(e,r){var n;if(r%(n=e.indexOf("coord")>=0?2:e.indexOf("color")>=0?4:3)>0)throw"can not guess numComponents. You should specify it.";return n}function _(e,r){if(b(e))return e;if(e.data&&b(e.data))return e.data;Array.isArray(e)&&(e={data:e}),e.numComponents||(e.numComponents=E(r,e.length));var n=e.type;n||"indices"===r&&(n=Uint16Array);var t=g(e.numComponents,e.data.length/e.numComponents|0,n);return t.push(e.data),t}function x(e,r,n){var t=n||function(e){var r={};return Object.keys(e).filter(h).forEach((function(e){r["a_"+e]=e})),r}(r),o={};return Object.keys(t).forEach((function(n){var i,a=t[n],u=r[a];if(u.value)o[n]={value:u.value};else{var c=_(u,a);o[n]={buffer:p(e,c),numComponents:u.numComponents||c.numComponents||E(a),type:A(e,c),normalize:(i=c,i instanceof Int8Array||i instanceof Uint8Array)}}})),o}function T(e){return e.length?e:e.data}var y=/coord|texture/i,C=/color|colour/i;function E(e,r){var n;if(r%(n=y.test(e)?2:C.test(e)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(n," but ").concat(r," values is not evenly divisible by ").concat(n,". You should specify it."));return n}var S,R=["position","positions","a_position"];function F(e){var r,n,t=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return i(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}(R);try{for(t.s();!(n=t.n()).done;){var o=n.value;if(o in e){r=o;break}}}catch(e){t.e(e)}finally{t.f()}var a=e[r=r||Object.keys(e)[0]],u=T(a).length,c=function(e,r){return e.numComponents||e.size||E(r,T(e).length)}(a,r),f=u/c;if(u%c>0)throw new Error("numComponents ".concat(c," not correct for length ").concat(u));return f}function w(e,r,n,t,o){var i=r.indices;n=void 0===n?e.TRIANGLES:n;var a=void 0===t?r.numElements:t;o=void 0===o?0:o,i?e.drawElements(n,a,e.UNSIGNED_SHORT,o):e.drawArrays(n,o,a)}return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(S=HTMLCanvasElement.prototype.getContext,function(){var e=arguments;return"webgl"===e[0]&&((e=[].slice.call(arguments))[0]="experimental-webgl"),S.apply(this,e)})),{createAugmentedTypedArray:g,createAttribsFromArrays:x,createBuffersFromArrays:function(e,r){var n={};return Object.keys(r).forEach((function(t){var o="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,i=_(r[t],name);n[t]=p(e,i,o)})),r.indices?n.numElements=r.indices.length:r.position&&(n.numElements=r.position.length/3),n},createBufferInfoFromArrays:function(e,r,n){var t={attribs:x(e,r,n)},o=r.indices;return o?(o=_(o,"indices"),t.indices=p(e,o,e.ELEMENT_ARRAY_BUFFER),t.numElements=o.length):t.numElements=F(r),t},createAttributeSetters:l,createProgram:o,createProgramFromScripts:function(e,r,n){var t=e.createShader(e.VERTEX_SHADER);if(!t)return console.error("Failed to create vertex shader"),null;e.shaderSource(t,r),e.compileShader(t);var o=e.createShader(e.FRAGMENT_SHADER);if(!o)return console.error("Failed to create fragment shader"),null;e.shaderSource(o,n),e.compileShader(o);var i=e.createProgram();return i?(e.attachShader(i,t),e.attachShader(i,o),e.linkProgram(i),i):(console.error("Failed to create shader program"),null)},createProgramFromSources:function(e,r,n,i,u){for(var c=[],f=0;f<r.length;++f)c.push(t(e,r[f],e[a[f]],u));return o(e,c,n,i,u)},createProgramInfo:function(e,r,n,t,o){r=r.map((function(e){var r=document.getElementById(e);return r?r.text:e}));var i=webglUtils.createProgramFromSources(e,r,n,t,o);return i?{program:i,uniformSetters:c(e,i),attribSetters:l(e,i)}:null},createUniformSetters:c,createVAOAndSetAttributes:v,createVAOFromBufferInfo:function(e,r,n){return v(e,r.attribSetters||r,n.attribs,n.indices)},drawBufferInfo:w,drawObjectList:function(e,r){var n=null,t=null;r.forEach((function(r){var o=r.programInfo,i=r.bufferInfo,a=!1;o!==n&&(n=o,e.useProgram(o.program),a=!0),(a||i!==t)&&(t=i,m(e,o.attribSetters,i)),f(o.uniformSetters,r.uniforms),w(e,i)}))},glEnumToString:function(e,r){var n=[];for(var t in e)e[t]===r&&n.push(t);return n.length?n.join(" | "):"0x".concat(r.toString(16))},getExtensionWithKnownPrefixes:function(e,r){for(var n=0;n<d.length;++n){var t=d[n]+r,o=e.getExtension(t);if(o)return o}},resizeCanvasToDisplaySize:function(e,r){r=r||1;var n=e.clientWidth*r|0,t=e.clientHeight*r|0;return(e.width!==n||e.height!==t)&&(e.width=n,e.height=t,!0)},setAttributes:s,setBuffersAndAttributes:m,setUniforms:f}},void 0===(n=function(){return o.call(t)}.apply(r,[]))||(e.exports=n)}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};return(()=>{"use strict";n.r(t),n.d(t,{FlatGray:()=>a,GrayScale:()=>u,default:()=>c});var e=n(872);var r=function(r,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=new Image;n.width&&!Number.isNaN(n.width)&&(o.width=n.width),n.height&&!Number.isNaN(n.height)&&(o.height=n.height),o.src=r,o.onload=function(){!function(r,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=n.getContext("webgl");if(o){var i=null!=t&&t.vertex?t.vertex:"attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    \n    uniform vec2 u_resolution;\n    \n    varying vec2 v_texCoord;\n    \n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne = a_position / u_resolution;\n    \n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n    \n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n    \n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }",a=null!=t&&t.fragment?t.fragment:"precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform vec2 iResolution;\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n    \n    void main() {\n        vec2 uv = gl_FragCoord.xy / iResolution;\n    \n        // get pixel information from uv location\n        vec4 texColor = texture2D(u_image, v_texCoord).bgra;\n    \n        float intensity = fract(texColor.x * texColor.y * 2.5);\n    \n        //gl_FragColor = texture2D(u_image, v_texCoord).bgra;\n        vec4 color;\n        if (intensity > 0.8)\n            color = vec4(texColor.rgb, 1.0);\n        else if (intensity > 0.5)\n            color = vec4(texColor.rgb, .9);\n        else if (intensity > 0.25)\n            color = vec4(texColor.rgb, .4);\n        else\n            color = vec4(texColor.rgb, .5);\n        \n        float grayScale = (texColor.r + texColor.g + texColor.b) / 3.0;\n        gl_FragColor = vec4(grayScale, texColor.gb * 1.8, 1.0);\n    \n       \n    }",u=e.createProgramFromScripts(o,i,a),c=o.getAttribLocation(u,"a_position"),f=o.getAttribLocation(u,"a_texCoord"),l=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,l),function(e,r,n,t,o){var i=0+t,a=0+o;e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,i,0,0,a,0,a,i,0,i,a]),e.STATIC_DRAW)}(o,0,0,r.width,r.height);var s=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),o.STATIC_DRAW);var v=o.createTexture();o.bindTexture(o.TEXTURE_2D,v),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r);var m=o.getUniformLocation(u,"u_resolution");e.resizeCanvasToDisplaySize(o.canvas),o.viewport(0,0,o.canvas.width,o.canvas.height),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.useProgram(u),o.enableVertexAttribArray(c),o.bindBuffer(o.ARRAY_BUFFER,l);var d=2,g=o.FLOAT,p=!1,h=0,A=0;o.vertexAttribPointer(c,d,g,p,h,A),o.enableVertexAttribArray(f),o.bindBuffer(o.ARRAY_BUFFER,s),d=2,g=o.FLOAT,p=!1,h=0,A=0,o.vertexAttribPointer(f,d,g,p,h,A),o.uniform2f(m,o.canvas.width,o.canvas.height);var b=o.TRIANGLES;A=0,o.drawArrays(b,A,6)}}(o,n,t)}},o={vertex:"attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    \n    uniform vec2 u_resolution;\n    \n    varying vec2 v_texCoord;\n    \n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne =  a_position * vec2(1.0) / u_resolution;\n    \n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n    \n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n    \n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }",fragment:"precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform vec2 iResolution;\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n    \n    void main() {\n        vec2 uv = gl_FragCoord.xy / iResolution * 20.0;\n    \n        // get pixel information from uv location\n        vec4 texColor = texture2D(u_image, v_texCoord).bgra;\n    \n        float grayScale = (texColor.r + texColor.g + texColor.b) / 3.0;\n        // float intensity = fract(texColor.x * texColor.y * .524584);\n        float intensity = fract(grayScale * 0.5378785741);\n    \n        //gl_FragColor = texture2D(u_image, v_texCoord).bgra;\n        vec4 color;\n\n        if (intensity > 0.5)\n            color = vec4(grayScale,grayScale,grayScale, 1.0);\n        else if (intensity > 0.25)\n            color = vec4(0.2, 0.3, 0.3, 1.0);\n        else\n            color = vec4(0.1, .10, .10, 1.0);\n        \n        gl_FragColor = color;\n    \n       \n    }"},i={vertex:"attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    \n    uniform vec2 u_resolution;\n    \n    varying vec2 v_texCoord;\n    \n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne =  a_position * vec2(1.0) / u_resolution;\n    \n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n    \n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n    \n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }",fragment:"precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform vec2 iResolution;\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n    \n    void main() {\n        vec2 uv = gl_FragCoord.xy / iResolution * 20.0;\n    \n        // get pixel information from uv location\n        vec4 texColor = texture2D(u_image, v_texCoord).bgra;\n    \n        float grayScale = (texColor.r + texColor.g + texColor.b) / 3.0;\n        gl_FragColor = vec4(grayScale,grayScale,grayScale, 1.0);\n    \n       \n    }"},a=function(e,n){r(e,n,o)},u=function(e,n){r(e,n,i)};const c=r})(),t})()));
//# sourceMappingURL=main.umd.js.map